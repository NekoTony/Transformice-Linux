{
  "version": 3,
  "file": "uploader.js",
  "sourceRoot": "",
  "sources": [
    "../../src/publish/uploader.ts"
  ],
  "names": [],
  "mappings": ";;;;;;;;;AAAA,AAAO,AAAW,AAAM,AAAU;;;;;;AAClC,AAAO,AAAE,AAAgB,AAAS,AAAM,AAAY;;;;;;AAGpD,AAAO,AAAE,AAAyB,AAAE,AAAM,AAAqD,AAE/F,AAAM;;;;;;oBAAqB,AAAY,MAAE,AAAe,UAAE,AAAgB,UAAE,AAAsB,SAAE,AAA8B;AAChI,UAAM,AAAW,sBAAwB,AAAM,MAAC,AAAK,iEAAgC,AAAQ,QAAwB;AACnH,AAAK,eAAE,AAAQ,SAAC,AAAI;AACpB,AAAU,oBAAE,AAAG;AACf,AAAM,gBAAE,AAAO,QAAC,AAAM;AACtB,AAAK,eAAE,AAAE,AACV,AAAC;AALqH,KAA/D,AAAI,AAAW,AAAC,CAAvC,AAAO,GAKnC,AAAI;AAET,UAAM,AAAe,kBAAG,AAAgB,sDAAC,AAAI,AAAC;AAC9C,AAAe,oBAAC,AAAE,GAAC,AAAO,SAAE,AAAM,AAAC;AAEnC,QAAI,AAAM,SAAQ,AAAe;AACjC,AAAE,AAAC,QAAC,AAAW,eAAI,AAAI,AAAC,MAAC,AAAC;AACxB,AAAM,iBAAG,AAAM,OAAC,AAAI,KAAC,AAAI,AAAyB,gGAAC,AAAQ,SAAC,AAAI,MAAE,AAAE,MAAI,AAAW,YAAC,AAAI,KAAC,AAAE,GAAC,AAAK,AAAC,AAAC,AAAC,AACtG;AAAC;AAED,AAAM,WAAC,AAAI,KAAC,AAAO,AAAC,AACtB;AAAC",
  "sourcesContent": [
    "import ProgressBar from \"progress\"\nimport { createReadStream, Stats } from \"fs-extra-p\"\nimport { ReadStream } from \"tty\"\nimport { ClientRequest } from \"http\"\nimport { ProgressCallbackTransform } from \"electron-builder-http/out/ProgressCallbackTransform\"\n\nexport function uploadFile(file: string, fileStat: Stats, fileName: string, request: ClientRequest, reject: (error: Error) => void) {\n  const progressBar = (<ReadStream>process.stdin).isTTY ? new ProgressBar(`Uploading ${fileName} [:bar] :percent :etas`, {\n    total: fileStat.size,\n    incomplete: \" \",\n    stream: process.stdout,\n    width: 20,\n  }) : null\n\n  const fileInputStream = createReadStream(file)\n  fileInputStream.on(\"error\", reject)\n\n  let stream: any = fileInputStream\n  if (progressBar != null) {\n    stream = stream.pipe(new ProgressCallbackTransform(fileStat.size, it => progressBar.tick(it.delta)))\n  }\n\n  stream.pipe(request)\n}"
  ]
}
